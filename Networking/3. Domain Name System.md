# Domain Name System (DNS)

## Definition

- The **Domain Name System (DNS)** is like the **phonebook of the internet**.  

- It translates **human-readable domain names** (e.g., `www.example.com`) into **IP addresses** (e.g., `192.168.1.1`) that computers use to identify each other on the network. 

- Without DNS, we would have to remember complex IP addresses instead of simple domain names.


## Why DNS is Needed

- Humans are good at remembering names (like `google.com`) but not numeric IP addresses.  

- Websites can change their hosting servers → IP addresses change, but domain names remain the same.  

- DNS ensures **flexibility, usability, and scalability** of the internet.

## How DNS Works?

![DNS Workflow](images/dns.png)

1. **User Request**:  
   - User enters `www.example.com` in the browser.  

2. **Local Cache Check**: 
    - Your browser first checks its local cache to see if it has recently looked up the domain. 
    
    - If it finds the corresponding IP address, it uses that directly without querying external servers.

3. **DNS Resolver Query**: 
    - If the IP address isn’t in the local cache, your computer sends a request to a DNS resolver.
    
    - The **ISP’s DNS** resolver (or public DNS like Google `8.8.8.8`) checks its cache.  
    
    - If not found, it queries other DNS servers.  

4. **Root DNS Server**: 
    - The resolver sends the request to a root DNS server. 
    
    - The root server doesn’t know the exact IP address for `www.example.com` but knows which **Top-Level Domain (TLD)** server to query based on the domain’s extension (.com)

5. **TLD Server**:  
    - Directs the resolver to the **Authoritative DNS server** of `example.com`.  

6. **Authoritative DNS Server**:
    - Returns the **IP address** of `www.example.com`.  

7. **Browser Connects**:  
   - The browser uses the IP to connect to the web server and fetch the webpage.

**This entire process happens in milliseconds, enabling a fast and efficient browsing experience.**

--- 

## Key Components of DNS

1. **DNS Resolver (Recursive Resolver)**  
   - Usually managed by ISP or third-party providers (e.g., Cloudflare `1.1.1.1`, Google DNS `8.8.8.8`).  
   
   - Handles the user’s query and communicates with other DNS servers.  

2. **Root DNS Server**  
   - The top-level DNS server.  
   
   - Points to TLD servers (`.com`, `.org`, `.net`, country codes like `.in`, `.uk`).  

3. **TLD (Top-Level Domain) Server**  
   - Stores domain information for each TLD (`.com`, `.org`, `.edu`).  

4. **Authoritative DNS Server**  
   - The final source of truth for a domain.  
   
   - Holds **DNS records** (A, AAAA, CNAME, MX, TXT, etc.).  

---

## Types of DNS Records

1. **A Record**: Maps domain → IPv4 address.  

2. **AAAA Record**: Maps domain → IPv6 address.  

3. **CNAME Record**: Maps one domain to another domain (alias).  

4. **MX Record**: Mail exchange record (used for emails).  

5. **NS Record**: Nameserver record (points to authoritative DNS servers).  

6. **TXT Record**: Stores arbitrary text (commonly for verification & security, e.g., SPF, DKIM).  

7. **PTR Record**: Reverse lookup (IP → domain).  

---

## DNS Caching
- To speed up resolution, DNS results are cached at multiple levels:
  
  - **Browser cache**  
  
  - **Operating System cache** (local DNS resolver)  
  
  - **ISP DNS cache**  
  
  - **Recursive resolver cache**  

- Each record has a **TTL (Time To Live)** that defines how long it should stay cached.

- `TTL (Time-to-Live)` is the amount of time that a DNS record is cached before it expires. 

- When the TTL expires, the cache is cleared and a fresh DNS query must be made. The TTL is defined by the authoritative DNS server, which can adjust this based on the nature of the domain.


## **DNS Security Issues**

- **DNS Spoofing / Cache Poisoning**: Attacker inserts false DNS records.  

- **DDoS Attacks on DNS Servers**: Overwhelming traffic to DNS infrastructure.  

- **DNS Hijacking**: Redirecting users to malicious sites.  

Mitigation: **DNSSEC (DNS Security Extensions)** – adds authentication and integrity checks.

---

## Domain Name Server

- The client machine sends a request to the local name server, which, if the root does not find the address in its database, sends a request to the root name server, which in turn, will route the query to a top-level domain (TLD) or authoritative name server.

- The root name server can also contain some hostName to IP address mappings. The Top-level domain (TLD) server always knows who the authoritative name server is. So finally the IP address is returned to the local name server which in turn returns the IP address to the host.

---

## DNS Lookup and DNS Resolver

- `DNS Lookup`, also called `DNS Resolution`, is the process of translating a human-readable domain name (like `www.example.com`) into its corresponding IP address (like `192.0.2.1`), which computers use to locate and communicate with each other on the internet. 

- It allows users to access websites easily using names instead of remembering numeric IP addresses.


- `DNS Resolver` is simply called a `DNS Client` and has the functionality for initiating the process of DNS Lookup which is also called `DNS Resolution`.

---

## DNS Resolution Flow (Simplified)

1. User enters domain name → Browser → OS cache → DNS Resolver.  

2. DNS Resolver checks cache → If not found, queries Root → TLD → Authoritative server.  

3. Authoritative server responds with IP.  

4. Resolver sends IP to browser.  

5. Browser connects to server using the IP.  